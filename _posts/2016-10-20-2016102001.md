---
layout: post
title: nodejs-回调函数
category: Nodejs
tags:  [Nodejs]
excerpt: "回调函数（callback），是指将一个函数的函数体（传递的是引用地址）作为参数传给另一个函数，达到指定的条件时，自动调用该函数，这种函数就叫回调函数。"
---
<h2>{{ page.title }}</h2>
{% include date.html%}
<p class="zhai">摘要：本文将回调函数的含义和运行机制进行了简单说明，并简略的阐述了回调函数的用途。</p>

### 回调函数 ###

所有的定时器，绑定事件，都是回调函数。当我们定义了一个函数，并不是马上执行，而是在它达到了一定条件之后执行。 比如我们定义了一个按钮，点击按钮后执行函数。这个点击的动作，触发了函数。
计时器也是一种回调函数，它在达到一定的时间点（达到某个条件）后触发函数。

**nodejs中所有的代码几乎都是回调函数写的。**

回调函数（callback），是指**将一个函数的函数体（传递的是引用地址）作为参数传给另一个函数，达到指定的条件时，自动调用该函数，这种函数就叫回调函数。**

回调函数就是一个**普通的函数**，只不过调用方式有一点特殊，由其他函数达到某个条件时自动调用。
### 实现机制 ###  
1. 定义一个回调函数；（非常普通的函数）  
2. 将回调函数的函数**引用地址作为参数传递给调用者**（调用者本身也是一个函数）；  
3. 当**特定的事件或条件发生**的时候，调用者**使用函数指针**调用回调函数对事件进行处理。  



	代码：
		
	//cb回调函数
	function cb(){
	  console.log(“hello”);
	}
	
	//setTimeout让传入进来的cb延迟1秒后运行。
	setTimeout(cb,1000);

首先，cb是一个函数，是一个复杂类型，我们将一个复杂类型传给setTimeout时，就是将**函数cb的地址传递给了setTimeout。**当达到某个条件时执行。这就是回调函数的用法。
	
	function show(){
		console.log('张三和李四，经常一起失踪');
	}
	
	setTimeout(show,1000);

达到一秒钟的时候，自动调用show函数。setTimeout也是一个函数。
我们可以理解为：

 	function settimeout(callback,time){
		if(i == time){
			callback();
		}
	};

当满足条件之后，执行callback函数，这个callback()就叫做**回调函数**

### 回调函数的用途 ###
回调函数经常常用，最简单的就是时间注册,计时器，或者**异步函数**
在写nodejs的时候，会经常用到回调函数。
**当某个事件发生或者某个任务完成时，需要做一些事情，那么我们就会用到回调函数。**